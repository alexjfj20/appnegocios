import{d as y,r as a,z as k,A as w,b as t,p as d,v as m,c as N,j as U,w as C,s as F,o as b}from"./index-BBIqiFrG.js";import{u as I}from"./onboarding-DLD-HHwx.js";import{_ as V}from"./OnboardingLayout.vue_vue_type_script_setup_true_lang-zS0cm_R9.js";import"./index-Dq7h7Pqt.js";const B={key:0,class:"mt-2"},O=["src"],A=y({__name:"Step3FirstProduct",setup(S){const f=F(),n=I(),o=a(n.productName),s=a(n.description),u=a(n.price),r=a(null),p=a(n.productImageFile),c=a(!1),v=a("");function g(i){var l;const e=(l=i.target.files)==null?void 0:l[0];e&&(p.value=e,r.value=URL.createObjectURL(e))}async function x(){n.setStep3({productName:o.value,description:s.value,price:u.value,productImageFile:p.value}),c.value=!0,v.value="";try{await n.submitOnboarding(),f.push({name:"dashboard"})}catch{v.value="Hubo un error al crear la tienda. Intenta de nuevo."}finally{c.value=!1}}return(i,e)=>(b(),k(V,null,{default:w(()=>[t("form",{onSubmit:C(x,["prevent"]),class:"space-y-6"},[t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium mb-1"},"Nombre del producto",-1)),d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.value=l),type:"text",class:"input",required:""},null,512),[[m,o.value]])]),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium mb-1"},"Descripción",-1)),d(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.value=l),class:"input",required:""},null,512),[[m,s.value]])]),t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium mb-1"},"Precio",-1)),d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>u.value=l),type:"number",min:"0",class:"input",required:""},null,512),[[m,u.value,void 0,{number:!0}]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium mb-1"},"Imagen del producto",-1)),t("input",{type:"file",accept:"image/*",class:"input",onChange:g},null,32),r.value?(b(),N("div",B,[t("img",{src:r.value,alt:"Preview",class:"h-20 rounded-xl border"},null,8,O)])):U("",!0)]),e[7]||(e[7]=t("button",{class:"btn btn-success w-full",type:"submit"},"¡Activar mi tienda!",-1))],32)]),_:1}))}});export{A as default};
